package com.jettjia.servlet;

import java.io.IOException;
import java.util.LinkedHashMap;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class CarServlet extends HttpServlet {
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// 1 获取到下单的商品id
		int id = Integer.parseInt(request.getParameter("id"));
		// 2 模拟商品数组
		String[] goods = {"Iphone7", "小米6", "三星Note8", "魅族7", "华为9"};
		String name = goods[id]; // 商品名称
		
		// 3 获取购物车里的session数据，存放到Map里，并且保证只保存一次
		Map<String, Integer> map = (Map<String, Integer>) request.getSession().getAttribute("cart");
		// session里没有数据
		if (map == null) {
			map = new LinkedHashMap<String, Integer>();
			request.getSession().setAttribute("cart", map);
		}
		
		// 4 判断购物车里有没有该商品
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}

}
